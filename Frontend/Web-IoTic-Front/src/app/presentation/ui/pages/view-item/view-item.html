<app-loading-page *ngIf="loadingService.loading$ | async" ></app-loading-page>
<div *ngIf="!(loadingService.loading$ | async)">
  <div class="header-wrapper">
    <app-header></app-header>
  </div>

  <div class="container-fluid">
    <div class="row">
      <div class="col-12 p-0">

        <div class="banner-primary d-flex justify-content-center align-items-center flex-column">
          <h1 class="title">Revisemos el item</h1>
          <p class="text-help">Detalles y estado actual del registro</p>
        </div>

        <div class="container-fluid mt-4 d-flex justify-content-center align-items-center">
          <div class="card item-card shadow-lg rounded-4 p-3 p-md-4 border-0">
                    <button class="btn-danger"
              (click)="confirmDelete()">
                 <i class="bi bi-trash "></i>
              </button>
            <div class="mb-4">
              <h3 class="title-card">Descripción</h3>
              <p class="text-card-item">{{ item?.descripcion }}</p>
            </div>

            <div class="mb-4">
              <h3 class="title-card">Estados</h3>
              <div class="row g-3 section-estados">
                  
                  <div class="col-12 col-lg-6 ">
                      <h4 class="text-state-subtitle">Estado físico</h4>
                      <div class="box-state d-flex  align-items-center"
                      [ngClass]="{ 'warning-state': item?.estado_fisico=== 'Bueno',
                        'bad-warning':  item?.estado_fisico === 'Dañado' }">
                          <p>{{ item?.estado_fisico }}</p>
                      </div>
                  </div>
                  
                  <div class="col-12 col-lg-6 ">
                      <h4 class="text-state-subtitle">Estado administrativo</h4>
                      <div class=" box-state  d-flex  align-items-center"
                        [ngClass]="{ 'bad-warning': item?.estado_admin=== 'Prestado',
                        'warning-state-no-loan':  item?.estado_admin === 'No prestar' }">
                          <p>{{ item?.estado_admin }}</p>
                      </div>
                  </div>
              </div>
            </div>

            <div class="mb-4">
              <h3 class="title-card">Observación</h3>
              <p class="text-card-item"> {{ item?.observacion }}</p>
            </div>

            <div>
              <h3 class="title-card">Fecha registro del item</h3>
              <p class="text-card-item">{{ item?.fecha_registro }}</p>
            </div>
            <div class="d-flex flex-column flex-sm-row justify-content-end gap-2 section-buttons">
              <button class="btn-outline-secondary"
              (click)="goToEdit()"
               >Editar</button>
              <button class="btn-primary" 
                      (click)="goToLoan()" 
                      [disabled]="item?.estado_fisico === 'Dañado' || item?.estado_admin === 'Prestado'">
                Dar en préstamo
              </button>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- Modal de confirmación para eliminar -->
  <app-confirmation-modal
    [isVisible]="showDeleteModal"
    title="Confirmar eliminación"
    message="¿Estás seguro de que deseas eliminar este item? Esta acción no se puede deshacer."
    confirmText="Eliminar"
    cancelText="Cancelar"
    confirmButtonClass="btn-danger"
    icon="fas fa-exclamation-triangle"
    (confirmed)="onDeleteConfirmed()"
    (cancelled)="onDeleteCancelled()">
  </app-confirmation-modal>

</div>
