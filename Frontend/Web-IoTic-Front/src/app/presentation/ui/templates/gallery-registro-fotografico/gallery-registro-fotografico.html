<div class="registro-gallery" *ngIf="registros?.length; else emptyTpl">

  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
    <div class="col" *ngFor="let reg of registros">
      <div
        class="card registro-card h-100"
        (click)="onCardClick(reg)"
        [routerLink]="getRouterLink(reg) || null">

        <!-- Imagen -->
        <div class="registro-image-wrapper">
          <img
            [src]="reg.foto_r2"
            [alt]="reg.titulo || 'Registro fotográfico'"
            class="registro-image" />
        </div>

        <!-- Contenido -->
        <div class="card-body d-flex flex-column">
          <h5 class="card-title registro-title mb-1">
            {{ reg.titulo || 'Sin título' }}
          </h5>

          <p class="registro-date small text-muted mb-2" *ngIf="reg.fecha">
            {{ reg.fecha | date:'dd/MM/yyyy' }}
          </p>

          <p class="card-text registro-description mb-3" *ngIf="reg.descripcion">
            {{ reg.descripcion }}
          </p>

          <!-- Acciones (solo si showActions = true) -->
          <div
            class="mt-auto d-flex justify-content-end gap-2"
            *ngIf="showActions">
            <button
              type="button"
              class="btn btn-outline-primary btn-sm"
              (click)="onEdit(reg, $event)">
              Editar
            </button>
            <button
              type="button"
              class="btn btn-outline-danger btn-sm"
              (click)="onDelete(reg, $event)">
              Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<ng-template #emptyTpl>
  <div class="registro-empty text-center py-5">
    <p class="mb-1 fw-semibold">Aún no hay registros fotográficos publicados.</p>
    <p class="small text-muted mb-0">
      Cuando se publiquen fotos desde el panel de administrador, aparecerán aquí.
    </p>
  </div>
</ng-template>
